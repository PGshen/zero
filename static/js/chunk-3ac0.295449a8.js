(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3ac0"],{A54v:function(e,t,i){"use strict";var n=i("u17T");i.n(n).a},ZySA:function(e,t,i){"use strict";var n=i("P2sY"),l=i.n(n),a=(i("jUE0"),{bind:function(e,t){e.addEventListener("click",function(i){var n=l()({},t.value),a=l()({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},n),s=a.ele;if(s){s.style.position="relative",s.style.overflow="hidden";var r=s.getBoundingClientRect(),o=s.querySelector(".waves-ripple");switch(o?o.className="waves-ripple":((o=document.createElement("span")).className="waves-ripple",o.style.height=o.style.width=Math.max(r.width,r.height)+"px",s.appendChild(o)),a.type){case"center":o.style.top=r.height/2-o.offsetHeight/2+"px",o.style.left=r.width/2-o.offsetWidth/2+"px";break;default:o.style.top=(i.pageY-r.top-o.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",o.style.left=(i.pageX-r.left-o.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return o.style.backgroundColor=a.color,o.className="waves-ripple z-active",!1}},!1)}}),s=function(e){e.directive("waves",a)};window.Vue&&(window.waves=a,Vue.use(s)),a.install=s;t.a=a},gHzz:function(e,t,i){"use strict";i.r(t);var n=i("QbLZ"),l=i.n(n),a=i("L2JU"),s={name:"MenuManager",directives:{waves:i("ZySA").a},data:function(){return{menuProps:{children:"children",label:"title",value:"id"},listQuery:{page:1,size:20,order:"id",cond:{}},methods:[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],total:null,treeItem:"",displayList:null,listLoading:!1,sortOptions:[{label:"按ID升序列",key:"id"},{label:"按ID降序",key:"id desc"}],tableKey:0,dialogFormVisible:!1,dialogStatus:"",textMap:{update:"编辑菜单",create:"创建菜单"},menu:{id:void 0,parentId:0,type:0,name:"",title:"",path:"",icon:"",perm:"",orderNum:"",hidden:"1",alwaysShow:"0",component:"",redirect:"",url:"",method:""},menuType:[{id:0,name:"菜单"},{id:1,name:"请求"},{id:2,name:"按钮"}]}},computed:l()({},Object(a.c)(["menuTree","menuList","permList"])),watch:{treeItem:function(e){null!==e&&(this.displayList=null,this.displayList=this.getMenuItem(e,this.menuList))}},created:function(){this.getMenuList()},methods:l()({},Object(a.b)({GetMenuList:"GetMenuList",AddMenu:"AddMenu",UpdateMenu:"UpdateMenu",DeleteMenu:"DeleteMenu"}),{getMenuList:function(){var e=this;this.GetMenuList().then(function(t){t?void 0===e.menuList.children&&null===e.menuList.children||(e.displayList=e.menuList.children):e.$notify({title:"失败",message:"获取菜单失败",type:"failure",duration:2e3})})},handleCascaderChange:function(e){this.menu.parentId=e[e.length-1]},handleFilter:function(){this.dialogStatus=""},handleCreate:function(){this.menu.id="",this.menu.parentId="",this.menu.type=0,this.menu.name="",this.menu.title="",this.menu.path="",this.menu.icon="",this.menu.perm="",this.menu.orderNum="",this.menu.hidden="",this.menu.alwaysShow="",this.menu.component="",this.menu.redirect="",this.menu.url="",this.menu.method="",this.dialogStatus="create",this.dialogFormVisible=!0},handleUpdate:function(e){this.menu.id=e.id,this.menu.parentId=e.parentId,this.menu.type=e.type,this.menu.name=e.name,this.menu.title=e.title,this.menu.path=e.path,this.menu.icon=e.icon,this.menu.perm=e.perm,this.menu.orderNum=e.orderNum,this.menu.hidden=e.hidden,this.menu.alwaysShow=e.alwaysShow,this.menu.component=e.component,this.menu.redirect=e.redirect,this.menu.url=e.url,this.menu.method=e.method,this.dialogStatus="update",this.dialogFormVisible=!0},handleForbid:function(e){var t=this;this.DeleteMenu(e.id).then(function(e){e&&(t.dialogFormVisible=!1,t.getMenuList())})},handleDelete:function(e){var t=this;this.DeleteMenu(e.id).then(function(e){e&&t.getMenuList()})},handleDownload:function(){this.dialogStatus=""},handleSizeChange:function(e){this.listQuery.size=e},handlePageChange:function(e){this.listQuery.page=e},create:function(){var e=this;this.AddMenu(this.menu).then(function(t){t?(e.dialogFormVisible=!1,e.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),e.getMenuList()):e.$notify({title:"失败",message:"创建失败",type:"fail",duration:2e3})})},update:function(){var e=this;this.UpdateMenu(this.menu).then(function(t){t?(e.dialogFormVisible=!1,e.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3}),e.getMenuList()):e.$notify({title:"失败",message:"创建失败",type:"fail",duration:2e3})})},handleNodeClick:function(e){this.treeItem=e.name},getMenuItem:function(e,t){if(void 0===t||null===t||""===t)return[];if(void 0===t.children||null===t.children||""===t)return[];var i=null,n=void 0;for(n in t.children){if(e===t.children[n].name){i=t.children[n].children;break}var l;if(null!==(l=this.getMenuItem(e,t.children[n]))){i=l;break}}return""===i&&(i=[]),i}})},r=(i("A54v"),i("KHd+")),o=Object(r.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container menu-container"},[i("div",{staticClass:"left-bar"},[i("el-card",{staticStyle:{"min-height":"100%"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"line-height":"10px"}},[e._v("菜单结构")])]),e._v(" "),i("el-tree",{attrs:{data:e.menuTree,props:e.menuProps,"highlight-current":!0,accordion:""},on:{"node-click":e.handleNodeClick}})],1)],1),e._v(" "),i("div",{staticClass:"right-content"},[i("el-card",{staticStyle:{"min-height":"100%"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{staticStyle:{"line-height":"10px"}},[e._v("菜单列表")])]),e._v(" "),i("div",{staticClass:"body"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"菜单名称"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleFilter(t):null}},model:{value:e.listQuery.cond.name,callback:function(t){e.$set(e.listQuery.cond,"name",t)},expression:"listQuery.cond.name"}}),e._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"120px"},attrs:{placeholder:"排序"},on:{change:e.handleFilter},model:{value:e.listQuery.order,callback:function(t){e.$set(e.listQuery,"order",t)},expression:"listQuery.order"}},e._l(e.sortOptions,function(e){return i("el-option",{key:e.key,attrs:{label:e.label,value:e.key}})})),e._v(" "),void 0!==e.permList&&-1!==e.permList.indexOf("sys:menu:list")?i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:e.handleFilter}},[e._v("搜索")]):e._e(),e._v(" "),void 0!==e.permList&&-1!==e.permList.indexOf("sys:menu:add")?i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"edit"},on:{click:e.handleCreate}},[e._v("\n            添加\n          ")]):e._e(),e._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"document"},on:{click:e.handleDownload}},[e._v("导出")])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.displayList,border:"",fit:""}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"80",type:"index"}}),e._v(" "),i("el-table-column",{attrs:{"min-width":"130",label:"菜单名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"link-type",on:{click:function(i){e.handleUpdate(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"180",label:"请求URL"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.url))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"130",label:"请求Method"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.method))])]}}])}),e._v(" "),i("el-table-column",{attrs:{"min-width":"100",label:"菜单类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.type?i("el-tag",{attrs:{type:"primary"}},[e._v("菜单")]):e._e(),e._v(" "),1===t.row.type?i("el-tag",{attrs:{type:"success"}},[e._v("请求")]):e._e(),e._v(" "),2===t.row.type?i("el-tag",{attrs:{type:"warning"}},[e._v("按钮")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[void 0!==e.permList&&-1!==e.permList.indexOf("sys:menu:update")?i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){e.handleUpdate(t.row)}}},[e._v("编辑\n              ")]):e._e(),e._v(" "),void 0!==e.permList&&-1!==e.permList.indexOf("sys:menu:ban")?i("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(i){e.handleForbid(t.row)}}},[e._v("禁用\n              ")]):e._e(),e._v(" "),void 0!==e.permList&&-1!==e.permList.indexOf("sys:menu:delete")?i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){e.handleDelete(t.row)}}},[e._v("删除\n              ")]):e._e()]}}])})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[i("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.size,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(t){e.$set(e.listQuery,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handlePageChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],"close-on-click-modal":!1,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{staticClass:"small-space menu-form",attrs:{inline:!0,model:e.menu,"label-position":"left","label-width":"70px"}},[i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"类型"}},[i("el-radio-group",{model:{value:e.menu.type,callback:function(t){e.$set(e.menu,"type",t)},expression:"menu.type"}},e._l(e.menuType,function(t){return i("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"名称"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"名称必须唯一,建议英文"},model:{value:e.menu.name,callback:function(t){e.$set(e.menu,"name",t)},expression:"menu.name"}})],1),e._v(" "),i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"显示名称"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入显示名称"},model:{value:e.menu.title,callback:function(t){e.$set(e.menu,"title",t)},expression:"menu.title"}})],1),e._v(" "),i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"上级菜单"}},[i("el-cascader",{attrs:{props:e.menuProps,options:e.menuTree,"change-on-select":""},on:{change:e.handleCascaderChange}})],1),e._v(" "),0===e.menu.type?i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"路由path"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入路由path"},model:{value:e.menu.path,callback:function(t){e.$set(e.menu,"path",t)},expression:"menu.path"}})],1):e._e(),e._v(" "),i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"请求URL"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入请求URL"},model:{value:e.menu.url,callback:function(t){e.$set(e.menu,"url",t)},expression:"menu.url"}})],1),e._v(" "),i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"请求方法"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.menu.method,callback:function(t){e.$set(e.menu,"method",t)},expression:"menu.method"}},e._l(e.methods,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),0===e.menu.type?i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"菜单图标"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入图标名称"},model:{value:e.menu.icon,callback:function(t){e.$set(e.menu,"icon",t)},expression:"menu.icon"}})],1):e._e(),e._v(" "),i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"授权标识"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"请输入授权标识,menu:add"},model:{value:e.menu.perm,callback:function(t){e.$set(e.menu,"perm",t)},expression:"menu.perm"}})],1),e._v(" "),0===e.menu.type?i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"组件路径"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"为一级菜单时填layout/Layout"},model:{value:e.menu.component,callback:function(t){e.$set(e.menu,"component",t)},expression:"menu.component"}})],1):e._e(),e._v(" "),0===e.menu.type?i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"重定向"}},[i("el-input",{staticClass:"filter-item",attrs:{placeholder:"不重定向不要填"},model:{value:e.menu.redirect,callback:function(t){e.$set(e.menu,"redirect",t)},expression:"menu.redirect"}})],1):e._e(),e._v(" "),0===e.menu.type?i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"是否隐藏"}},[i("el-radio-group",{model:{value:e.menu.hidden,callback:function(t){e.$set(e.menu,"hidden",t)},expression:"menu.hidden"}},[i("el-radio",{attrs:{label:"1"}},[e._v("隐藏")]),e._v(" "),i("el-radio",{attrs:{label:"0"}},[e._v("不隐藏")])],1)],1):e._e(),e._v(" "),0===e.menu.type?i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"为子菜单"}},[i("el-radio-group",{model:{value:e.menu.alwaysShow,callback:function(t){e.$set(e.menu,"alwaysShow",t)},expression:"menu.alwaysShow"}},[i("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),i("el-radio",{attrs:{label:"0"}},[e._v("否")])],1)],1):e._e(),e._v(" "),0===e.menu.type?i("el-form-item",{staticClass:"menu-form-item",attrs:{label:"排序号"}},[i("el-input-number",{model:{value:e.menu.orderNum,callback:function(t){e.$set(e.menu,"orderNum",t)},expression:"menu.orderNum"}})],1):e._e()],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),"create"===e.dialogStatus?i("el-button",{attrs:{type:"primary"},on:{click:e.create}},[e._v("创建")]):i("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")])],1)],1)],1)])],1)])},[],!1,null,null,null);o.options.__file="menus.vue";t.default=o.exports},jUE0:function(e,t,i){},u17T:function(e,t,i){}}]);